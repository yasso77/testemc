{% load custom_filters %}
<style>
  /* Main Sidebar Icons */
  .sidebar-nav .nav-link i {
    font-size: 1.4rem !important; /* Increased size */
    margin-right: 12px;
    color: #4154f1;
    min-width: 25px; /* Keeps text aligned if icons vary in width */
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Sub-menu (Nested) Icons */
  .sidebar-nav .nav-content i {
    font-size: 1.2rem !important; /* Fixed small sub-icons */
    margin-right: 10px;
    color: #899bbd;
    min-width: 22px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  /* Adjust vertical alignment for the whole row */
  .sidebar-nav .nav-link,
  .sidebar-nav .nav-content a {
    display: flex;
    align-items: center;
    padding: 12px 15px; /* Slightly more padding for a modern look */
  }

  /* Make sub-menu text larger to complement the bigger icons */
  .sidebar-nav .nav-content a span {
    font-size: 1rem;
    font-weight: 500;
  }
</style>

<aside id="sidebar" class="sidebar">
  <ul class="sidebar-nav" id="sidebar-nav">
    {% if user.is_authenticated %}

    <li class="nav-item">
      <a class="nav-link" href="{% url 'index' %}">
        <i class="bi bi-grid-fill"></i>
        <span>Dashboard</span>
      </a>
    </li>

    {% if request.user|in_group:"Call Center" %}
    <li class="nav-item">
      <a class="nav-link" data-bs-target="#call-center-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-headset"></i><span>Call Center</span><i class="bi bi-chevron-down ms-auto"></i>
      </a>
      <ul id="call-center-nav" class="nav-content show" data-bs-parent="#sidebar-nav">
        <li>
          <a href="{% url 'newreservation' %}">
            <i class="bi bi-plus-circle"></i><span>New Reservation</span>
          </a>
        </li>
        <li>
          <a href="{% url 'reservationList' %}">
            <i class="bi bi-list-ul"></i><span>Reservations List</span>
          </a>
        </li>
      </ul>
    </li>
    {% endif %}

    {% if request.user|in_group:"Reception" %}
    <li class="nav-item">
      <a class="nav-link" data-bs-target="#emc-center-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-building"></i><span>EMC Center</span><i class="bi bi-chevron-down ms-auto"></i>
      </a>
      <ul id="emc-center-nav" class="nav-content show" data-bs-parent="#sidebar-nav">
        <li><a href="{% url 'centerNewreservation' %}"><i class="bi bi-plus-lg"></i><span>New Reservation</span></a></li>
        <li><a href="{% url 'centerPatients' 'Attendance-Today' %}"><i class="bi bi-calendar-check"></i><span>Attendance Today</span></a></li>
        <li><a href="{% url 'dashSearchOnPatient' %}"><i class="bi bi-search"></i><span>Search Reservation</span></a></li>
      </ul>
    </li>
    {% endif %}

    {% if request.user|in_group:"Doctors" or request.user|in_group:"DoctorAudit" %}
    <li class="nav-item">
      <a class="nav-link" data-bs-target="#doctor-nav" data-bs-toggle="collapse" href="#">
        <i class="bi-hospital"></i><span>Medical Staff</span><i class="bi bi-chevron-down ms-auto"></i>
      </a>
      <ul id="doctor-nav" class="nav-content show" data-bs-parent="#sidebar-nav">
        {% if request.user|in_group:"Doctors" %}
          <li><a href="{% url 'DoctorOp' %}"><i class="bi bi-clipboard-pulse"></i><span>Doctor Examination</span></a></li>
          <li><a href="{% url 'VisitstList' 'D' 'None' %}"><i class="bi bi-person-badge"></i><span>D/Patients List</span></a></li>
        {% endif %}

        {% if request.user|in_group:"DoctorAudit" %}
          <li><a href="{% url 'AuditEvaluation' %}"><i class="bi bi-shield-check"></i><span>Audit Examination</span></a></li>
          <li><a href="{% url 'VisitstList' 'A' 'None' %}"><i class="bi bi-journal-text"></i><span>Audit Patients </span></a></li>
        {% endif %}
      </ul>
    </li>
    {% endif %}

    {% if request.user.is_staff %}
    <li class="nav-item">
      <a class="nav-link" data-bs-target="#reports-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-bar-chart-line"></i><span>Marketing Sections</span><i class="bi bi-chevron-down ms-auto"></i>
      </a>
      <ul id="reports-nav" class="nav-content show" data-bs-parent="#sidebar-nav">
         <li><a href="{% url 'patient_report' %}"><i class="bi bi-file-earmark-spreadsheet"></i><span>All Patients</span></a></li>
         <li><a href="{% url 'adminSearchOnPatinet' %}"><i class="bi bi-search"></i><span>Search Reservation</span></a></li>
       
        <li><a href="{% url 'attendance_report' %}"><i class="bi bi-files"></i><span>Attended-Patients</span></a></li>

         <li><a href="{% url 'archivedPatient' %}"><i class="bi bi-files"></i><span>Archived-Patients</span></a></li>
           <li><a href="{% url 'duplicatedPatients' %}"><i class="bi bi-graph-up-arrow"></i><span>Duplicated Patients</span></a></li>
        {% comment %} <li><a href="{% url 'doctorStats' %}"><i class="bi bi-graph-up-arrow"></i><span>Call Center Stats</span></a></li> {% endcomment %}
        <li><a href="{% url 'doctorStats' %}"><i class="bi bi-graph-up-arrow"></i><span>Doctors Stats</span></a></li>
        <li><a href="{% url 'auditStats' %}"><i class="bi bi-graph-up-arrow"></i><span>Audit Stats</span></a></li>
        {% comment %} <li><a href="{% url 'liveReportDegree' %}"><i class="bi bi-broadcast"></i><span>Live Report</span></a></li> 
         <li><a href="{% url 'compare_visits' %}"><i class="bi bi-arrow-left-right"></i><span>Audit-vs-Doctor</span></a></li> {% endcomment %}
      </ul>
    </li>
    {% endif %}

    {% endif %}
  </ul>
</aside>